<ext:BorderlessWindow x:Class="MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:窗口调节器" x:Name="ThisWindow" ResizeThickness="4"
        mc:Ignorable="d" AllowsTransparency="True" WindowStyle="None" 
        UseLayoutRounding="True" AngleWidth="12"
        MinWidth="400" MinHeight="350" BorderBrush="DodgerBlue" BorderThickness="1"
        xmlns:ext="clr-namespace:Nukepayload2.UI.Xaml;assembly=Nukepayload2.UI.Win32"
        Title="RGSS 窗口调节器" Height="450" Width="400">
    <Window.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="pack://application:,,,/Nukepayload2.UI.Win32;component/Themes/Generic.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <DropShadowEffect x:Key="FluentShadowEffect" ShadowDepth="0" BlurRadius="10" Opacity="0.6" RenderingBias="Performance"/>
            <Style TargetType="TextBlock">
                <Setter Property="Margin" Value="2"/>
            </Style>
            <Style TargetType="local:ToggleSwitch">
                <Setter Property="Margin" Value="8"/>
            </Style>
            <Style TargetType="Button">
                <Setter Property="SnapsToDevicePixels" Value="True"/>
                <Setter Property="Margin" Value="0"/>
                <Setter Property="Padding" Value="32,8"/>
                <Setter Property="BorderBrush" Value="DarkGray"/>
            </Style>
        </ResourceDictionary>
    </Window.Resources>
    <Grid>
        <Grid.Resources>
            <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                    <ResourceDictionary Source="pack://application:,,,/Nukepayload2.UI.Win32;component/Themes/Generic.xaml"/>
                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
        </Grid.Resources>
        <Grid.RowDefinitions>
            <RowDefinition Height="32"/>
            <RowDefinition/>
        </Grid.RowDefinitions>
        <Grid x:Name="TitleBar">
            <Rectangle x:Name="TitleBarDragElement" Fill="#01FFFFFF"/>
            <TextBlock Margin="8" IsHitTestVisible="False" Text="{Binding ElementName=ThisWindow, Path=Title}"/>
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,48,0" VerticalAlignment="Top">
                <Button x:Name="BtnViewReleases"
                    Background="#3F7F7F7F" BorderThickness="0"
                    Padding="18,4" Margin="0,0,4,0">发行版...</Button>
                <Button x:Name="BtnViewSource"
                    Background="#3F7F7F7F" BorderThickness="0"
                    Padding="18,4" Margin="0,0,4,0">源代码...</Button>
                <Button x:Name="BtnAbout"
                    Background="#3F7F7F7F" BorderThickness="0"
                    Padding="18,4">关于</Button>
            </StackPanel>

            <Button Click="BtnClose_Click" Style="{StaticResource CloseButtonStyle}" ToolTip="关闭"/>
        </Grid>
        <Border Grid.Row="1" x:Name="ClientArea">
            <ScrollViewer x:Name="ContentScroll" HorizontalScrollBarVisibility="Disabled" VerticalScrollBarVisibility="Auto">
                <StackPanel Margin="6">
                    <local:FluentControlChrome>
                        <Expander x:Name="ExpBasicSettings" Header="游戏窗口设置" Margin="4">
                            <StackPanel>
                                <local:FluentControlChrome Margin="0,8">
                                    <local:ToggleSwitch x:Name="ChkCanResize">窗口大小可变</local:ToggleSwitch>
                                </local:FluentControlChrome>
                                <local:FluentControlChrome Margin="0,8">
                                    <local:ToggleSwitch x:Name="ChkCanMaximize">窗口可以最大化</local:ToggleSwitch>
                                </local:FluentControlChrome>
                                <TextBlock x:Name="TblStatus"></TextBlock>
                                <StackPanel HorizontalAlignment="Right" VerticalAlignment="Bottom"
                                            Orientation="Horizontal" Margin="16,12">
                                    <local:FluentControlChrome Margin="8">
                                        <Button x:Name="BtnResizable">应用</Button>
                                    </local:FluentControlChrome>
                                    <local:FluentControlChrome Margin="8">
                                        <Button x:Name="BtnDetect">检测</Button>
                                    </local:FluentControlChrome>
                                </StackPanel>
                            </StackPanel>
                        </Expander>
                    </local:FluentControlChrome>
                    <local:FluentControlChrome Margin="0,8,0,0">
                        <Expander x:Name="ExpKeyboardSettings" Header="按键映射和按键宏" Margin="4">
                            <StackPanel Margin="0,4">
                                <TextBlock FontSize="16">按键映射</TextBlock>
                                <TextBlock TextWrapping="Wrap" Foreground="DarkRed">
                                    注意：此功能容易被杀毒软件当作病毒处理，导致此软件以及系统发生文件被杀毒软件删除或修改的问题。
                                    使用之前需确保使用误报率低的杀毒软件，例如 Windows Defender。尤其是不要使用 360 和腾讯电脑管家。
                                </TextBlock>
                                <TextBlock TextWrapping="Wrap">
                                    隐私声明：此功能收集您的键盘输入，用于确定何时映射到哪一个按键。
                                    此信息在退出此软件后消失，不会发送给任何其它地方，也不会记录到本地文件。
                                </TextBlock>
                                <local:FluentControlChrome Margin="0,8">
                                    <local:ToggleSwitch x:Name="ChkUseWasd">将 WASDJK 映射到 ↑→↓←XZ</local:ToggleSwitch>
                                </local:FluentControlChrome>
                                <local:FluentControlChrome Margin="0,8">
                                    <local:ToggleSwitch x:Name="ChkAutoDash">使用按键映射时, wasd 键自动跑步</local:ToggleSwitch>
                                </local:FluentControlChrome>
                                <TextBlock FontSize="16">屏幕游戏键盘</TextBlock>
                                <TextBlock>用鼠标或触摸屏操作游戏。暂不支持按住时连发。</TextBlock>
                                <local:FluentControlChrome HorizontalAlignment="Left" Margin="2">
                                    <Button x:Name="BtnOpenScreenKeyboard">打开</Button>
                                </local:FluentControlChrome>
                            </StackPanel>
                        </Expander>
                    </local:FluentControlChrome>
                    <local:FluentControlChrome Margin="0,8,0,0">
                        <Expander x:Name="ExpAdvancedSettings" Header="进阶设置" Margin="4">
                            <StackPanel Margin="0,4">
                                <TextBlock FontSize="16">游戏窗口名称格式</TextBlock>
                                <TextBox x:Name="TxtWindowNameFormat" Margin="2" FontSize="14">夜弦之音 ver#.##</TextBox>
                                <TextBlock FontWeight="Bold">格式说明</TextBlock>
                                <TextBlock TextWrapping="Wrap">* 任意数量字符<LineBreak/>
                                    ? 一个字符<LineBreak/>
                                    # 一个 0~9 的数字<LineBreak/>
                                    [字符列表] 字符列表中的任意一个字符。使用连字符（–）来分隔范围的下限和上限，例如[A-Z]。<LineBreak/>
                                    [!字符列表] 不在字符列表中的任意一个字符
                                </TextBlock>
                                <local:FluentControlChrome Margin="8" HorizontalAlignment="Right">
                                    <Button x:Name="BtnHelpTitleFormat">查看此功能的在线帮助</Button>
                                </local:FluentControlChrome>
                            </StackPanel>
                        </Expander>
                    </local:FluentControlChrome>
                </StackPanel>
            </ScrollViewer>
        </Border>
    </Grid>
</ext:BorderlessWindow>
